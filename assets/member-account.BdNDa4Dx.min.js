import"./theme.B4aNamjw.min.js";import{i as l}from"./member-api.C5IRMIGH.min.js";class a extends window.HTMLElement{constructor(){super()}connectedCallback(){this.init(),this.renewEl&&this.renewEl.addEventListener("click",()=>{const i=this.renewEl.dataset.renew;if(!i)return;const t=this.querySelector(`member-${i}`);this.update&&this.update(),t&&t.update()})}async init(){const{config:i,api:t}=await l();this.MemberApi=t,this.config=i,this.update()}async update(){var r,n,s;const{customer:i}=await this.MemberApi.getCustomesInfo(),{reward_fulfillments:t}=await this.MemberApi.getRewardFulfillments();this.customer=i,this.rewardFulfillmentsGiftCard=t.filter(e=>e.reward_token==="shopify_gift_card"),this.rewardFulfillmentsCoupon=t.filter(e=>e.reward_token!=="shopify_gift_card"),(r=this.pointsEl)==null||r.forEach(e=>{e.innerHTML=this.customer.points_balance}),(n=this.giftCartNumberEl)==null||n.forEach(e=>{e.innerHTML=this.rewardFulfillmentsGiftCard.length}),(s=this.couponNumberEl)==null||s.forEach(e=>{e.innerHTML=this.rewardFulfillmentsCoupon.length})}get giftCartNumberEl(){return this.querySelectorAll("[data-gift-card]")}get couponNumberEl(){return this.querySelectorAll("[data-coupon]")}get pointsEl(){return this.querySelectorAll("[data-points]")}get renewEl(){return this.querySelector("[data-renew]")}}window.customElements.define("member-account",a);
