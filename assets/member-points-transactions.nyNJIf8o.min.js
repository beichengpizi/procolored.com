import{L as o}from"./theme.B4aNamjw.min.js";import{i as l}from"./member-api.C5IRMIGH.min.js";import{d as c}from"./ender.NhWCw_5c.min.js";class d extends window.HTMLElement{constructor(){super(),this.limit=10,this.loading=new o}connectedCallback(){this.initializeComponent()}async initializeComponent(){const{customer:t,config:e,api:i}=await l();if(this.MemberApi=i,this.customer=t,this.config=e,!this.listElement||!this.paginationElement){console.error("The required elements are not found in the DOM.");return}await this.update(),this.addEventListener("click",n=>{var a,r;const s=(r=(a=n.target)==null?void 0:a.dataset)==null?void 0:r.cursor;s&&this.loadTransactionList({limit:this.limit,cursor:s})})}async update(){await this.loadTransactionList({limit:this.limit,cursor:""})}async loadTransactionList({limit:t,cursor:e}){try{this.loading.show({message:"Please wait...",spinnerColor:"text-accent"});const{points_transactions:i,metadata:n}=await this.MemberApi.fetchAllPointsPointsTransactions(t,e);this.listElement.innerHTML=this.renderTransactionList(i),this.paginationElement.innerHTML=this.renderPaginationButtons(n);const{next_cursor:s,previous_cursor:a}=n;this.paginationElement.classList.toggle("hidden",!s&&!a)}catch(i){console.error("Failed to fetch points transactions:",i)}finally{this.loading.hide()}}renderTransactionList(t){return t.length?t.map(e=>`
        <div class="table-row odd:bg-gray-50">
          <div class="table-cell p-4">${c("mm/dd/YYYY",e.created_at)}</div>
          <div class="table-cell p-4">${e.description}</div>
          <div class="table-cell p-4">${e.points_change}</div>
          <div class="table-cell p-4">Approved</div>
        </div>`).join(""):'<div class="min-h-40 lg:min-h-48">No transactions found.</div>'}renderPaginationButtons({next_cursor:t,previous_cursor:e}){return!t&&!e?"":`
      <button
        class="relative inline-flex items-center rounded-l-md px-2 py-2 text-white ring-1 ring-inset ring-accent-hover bg-accent hover:bg-accent-hover focus:z-20 focus:outline-offset-0 disabled:text-gray-400 disabled:bg-gray-200 disabled:cursor-no-drop transition-colors"
        ${e?`data-cursor="${e}"`:"disabled"}>
        <span class="sr-only pointer-events-none">Previous</span>
        <svg class="h-5 w-5 pointer-events-none" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd"/>
        </svg>
      </button>
      <button
        class="relative inline-flex items-center rounded-r-md px-2 py-2 text-white ring-1 ring-inset ring-accent-hover bg-accent hover:bg-accent-hover focus:z-20 focus:outline-offset-0 disabled:text-gray-400 disabled:bg-gray-200 disabled:cursor-no-drop transition-colors"
        ${t?`data-cursor="${t}"`:"disabled"}>
        <span class="sr-only pointer-events-none">Next</span>
        <svg class="h-5 w-5 pointer-events-none" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd"/>
        </svg>
      </button>`}get listElement(){return this.querySelector("[data-list]")}get paginationElement(){return this.querySelector("[data-pagination]")}}window.customElements.define("member-points-transactions",d);
