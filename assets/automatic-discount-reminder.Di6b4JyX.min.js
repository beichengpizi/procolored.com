class c extends window.HTMLElement{constructor(){super(),this.format="${{amount}}"}connectedCallback(){this.getVariantData(),this.finalSalePriceEl=this.querySelector("[data-final-sale-price]"),this.finalPriceEl=this.querySelector("[data-final-price]"),this.bindEvents()}getVariantData(){return this.variantData=this.variantData||JSON.parse(this.querySelector('[type="application/json"]').textContent),this.variantData}findSelectVariant(e){return this.variantData.find(t=>t.id===e)}bindEvents(){let e=0,t=0;document.addEventListener("product:variant-change",({detail:n})=>{const{variant:r}=n,a=this.findSelectVariant(r.id),i=a.custom_discount;if(this.classList.toggle("hidden",!i),!i)return;const s=i.split("%")[0];i.includes("%")?t=a.price*s/100:t=i*100,e=a.price-t,this.finalPriceEl.innerHTML=window.formatMoney(e,this.format),this.finalSalePriceEl.innerHTML=`-${window.formatMoney(t,this.format)}`})}}window.customElements.define("automatic-discount-reminder",c);
