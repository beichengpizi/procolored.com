<style>
  #shopify-section-{{ section.id }} .showroom-faq {
    max-width: 1400px;
  }

  #shopify-section-{{ section.id }} .section-header {
		justify-content: center;
		padding-bottom: 48px;
	}

  #shopify-section-{{ section.id }} .section-header--description {
		color: #5D5D5D;
		text-align: center;
		font-size: 24px;
	}

  #shopify-section-{{ section.id }} .section-header--title {
		text-align: center;
		color: #121212;
		text-align: center;
		font-size: 40px;
		font-weight: 700;
	}

  #shopify-section-{{ section.id }} .faqs-container {
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  #shopify-section-{{ section.id }} .faq-item {
    background: #fff;
    border-radius: 16px;
  }

  #shopify-section-{{ section.id }} .faq-button,
  #shopify-section-{{ section.id }} .faq-button:hover {
    padding: 32px 36px;
    background: #fff;
    border-radius: 16px;
    font-size: 24px;
    font-weight: 700;
  }

  #shopify-section-{{ section.id }} .faq-reply {
    border-top: 1px solid rgba(15, 12, 0, 0.20);
    padding: 32px 36px;
    font-size: 18px;
  }

  @media screen and (max-width: 1400px) {
    #shopify-section-{{ section.id }} .showroom-faq {
      padding-left: 36px;
      padding-right: 36px;
    }
  }

  @media screen and (max-width: 768px) {
    #shopify-section-{{ section.id }} .showroom-faq {
      padding-left: 16px;
      padding-right: 16px;
    }

    #shopify-section-{{ section.id }} .section-header {
      padding-bottom: 32px;
    }

    #shopify-section-{{ section.id }} .section-header--description {
      font-size: 16px;
    }

    #shopify-section-{{ section.id }} .section-header--title {
      font-size: 20px;
    }

    #shopify-section-{{ section.id }} .faq-item {
      border-radius: 12px;
    }

    #shopify-section-{{ section.id }} .faq-button,
    #shopify-section-{{ section.id }} .faq-button:hover {
      padding: 24px;
      border-radius: 12px;
      font-size: 16px;
    }

    #shopify-section-{{ section.id }} .faq-reply {
      padding: 24px;
      font-size: 12px;
    }
  }
</style>

{% liquid
  if section.settings.top == '17.5'
    assign top = 'pt-8 md:pt-17.5'
  elsif section.settings.top == '20'
    assign top = 'pt-8 md:pt-20'
  elsif section.settings.top == '24'
    assign top = 'pt-8 md:pt-24'
  elsif section.settings.top == '28'
    assign top = 'pt-8 md:pt-28'
  else
    assign top = ''
  endif

  if section.settings.bottom == '17.5'
    assign bottom = 'pb-8 md:pb-17.5'
  elsif section.settings.bottom == '20'
    assign bottom = 'pb-8 md:pb-20'
  elsif section.settings.bottom == '24'
    assign bottom = 'pb-8 md:pb-24'
  elsif section.settings.bottom == '28'
    assign bottom = 'pb-8 md:pb-28'
  else
    assign bottom = ''
  endif
%}

<div class="showroom-faq mx-auto {{ top }} {{ bottom }}" data-section-id="{{ section.id }}">
  {% if section.settings.headding != blank or section.settings.descriptiton != blank %}
    {% render 'section-header', section_heading: section.settings.headding, section_description: section.settings.descriptiton %}
  {% endif %}

  <div class="faqs-container">
    {%- for block in section.blocks -%}
      <div class="faq-item">
        <button class="w-full text-left flex justify-between py-4 lg:py-6 text-lg md:text-2xl font-bold hover:bg-gray-50 faq-button">
          <span>{{ block.settings.question }}</span>
          <svg
            class="size-5 ml-4 transition-all"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M353.323071 246.407016L620.37222 510.637979l-265.320785 268.146133c-11.776208 11.775184-11.73425201 30.908964 0.091074 42.73429l0.001023 0c11.825326 11.82635 30.958082 11.867282 42.72815-2.930749L680.899758 535.559579c3.817955-4.273327 8.205892-9.321296 8.933463-12.045337 4.470825-11.112082 2.232854-24.76503301-6.710842-35.987632l-286.98213-286.98213c-11.875468-8.847505-31.096229-8.893554-42.922578 2.932796C341.393367 215.303624 341.439416 234.523361 353.323071 246.407016z" p-id="4249" fill="#000000"></path>
          </svg>
        </button>
        <div class="px-5 lg:px-20 py-4 lg:py-6 text-gray-600 text-base md:text-lg hidden faq-reply">
          {{ block.settings.reply }}
        </div>
      </div>
    {%- endfor -%}
  </div>
</div>

<script>
  $(function () {
    const section = $('[data-section-id="{{ section.id }}"]');

    // 默认：第一项展开 + 箭头向上
    section.find('button svg').css({
      transform: 'rotate(90deg)' // 向上
    });
    section.find('button:first').siblings('div').show();

    // 点击事件
    section.find('button').click(function () {
      const svg = $(this).children('svg');
      const reply = $(this).siblings('div');

      // 判断当前是否展开（reply 是可见的）
      const isOpen = reply.is(':visible');

      if (isOpen) {
        // 已展开 → 收起 → 箭头向下
        svg.css({
          transform: 'rotate(90deg)'
        });
      } else {
        // 收起 → 展开 → 箭头向上
        svg.css({
          transform: 'rotate(-90deg)'
        });
      }

      reply.slideToggle();
    });
  });
</script>

{% schema %}
{
  "name": "ShowRoom FAQ",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "配置项"
    },
    {
      "type": "select",
      "id": "top",
      "default": "20",
      "label": "板块上边距",
      "options": [
        {
          "value": "none",
          "label": "无"
        },
        {
          "value": "17.5",
          "label": "小"
        },
        {
          "value": "20",
          "label": "默认"
        },
        {
          "value": "24",
          "label": "中"
        },
        {
          "value": "28",
          "label": "大"
        }
      ]
    },
    {
      "type": "select",
      "id": "bottom",
      "default": "20",
      "label": "板块下边距",
      "options": [
        {
          "value": "none",
          "label": "无"
        },
        {
          "value": "17.5",
          "label": "小"
        },
        {
          "value": "20",
          "label": "默认"
        },
        {
          "value": "24",
          "label": "中"
        },
        {
          "value": "28",
          "label": "大"
        }
      ]
    },
    {
      "type": "header",
      "content": "内容配置"
    },
    {
      "type": "text",
      "id": "headding",
      "label": "标题",
      "default": "FAQ"
    },
    {
      "type": "textarea",
      "id": "descriptiton",
      "label": "描述"
    }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "问题",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "问题"
        },
        {
          "type": "richtext",
          "id": "reply",
          "label": "回复"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "ShowRoom FAQ"
    }
  ]
}
{% endschema %}
