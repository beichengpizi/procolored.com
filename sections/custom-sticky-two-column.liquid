<style>
  {%- assign total_blocks = section.blocks.size -%}
  :root {
    /* Font sizes */
    --text-h0-n: 56px;
    --text-h1-n: 40px;
    --text-h2-n: 30px;
    --text-h3-n: 26px;
    --text-h4-n: 24px;
    --text-h5-n: 20px;
    --text-h6-n: 16px;
    --text-xs-n: 12px;
    --text-sm-n: 14px;
    --text-base-n: 18px;
    --text-lg-n: 19px;
  }

  .text-xxs { font-size: 10px; line-height: 1.3; }
  .text-xs { font-size: var(--text-xs-n); line-height: 1.3; }
  .text-sm { font-size: var(--text-sm-n); line-height: 1.3; }
  .text-base { font-size: var(--text-base-n); line-height: 1.3; }
  .text-md { font-size: var(--text-md-n); line-height: 1.2; }
  .text-lg { font-size: var(--text-lg-n); line-height: 1.2; }

  /* 重置样式 start */
  .sticky-two-column-section-{{section.id}} .h0 { font-size: var(--text-h0-n); line-height: 1; }
  .sticky-two-column-section-{{section.id}} h1,
  .sticky-two-column-section-{{section.id}} .h1,
  .sticky-two-column-section-{{section.id}} .prose h1:not(.h0, .h1, .h2, .h3, .h4, .h5, .h6) {
    font-size: var(--text-h1-n); line-height: 1.1;
  }
  .sticky-two-column-section-{{section.id}} h2,
  .sticky-two-column-section-{{section.id}} .h2,
  .sticky-two-column-section-{{section.id}} .prose h2:not(.h0, .h1, .h2, .h3, .h4, .h5, .h6) {
    font-size: var(--text-h2-n); line-height: 1.1;
  }
  .sticky-two-column-section-{{section.id}} h3,
  .sticky-two-column-section-{{section.id}} .h3,
  .sticky-two-column-section-{{section.id}} .prose h3:not(.h0, .h1, .h2, .h3, .h4, .h5, .h6) {
    font-size: var(--text-h3-n); line-height: 1.2;
  }
  .sticky-two-column-section-{{section.id}} h4,
  .sticky-two-column-section-{{section.id}} .h4,
  .sticky-two-column-section-{{section.id}} .prose h4:not(.h0, .h1, .h2, .h3, .h4, .h5, .h6) {
    font-size: var(--text-h4-n); line-height: 1.3;
  }
  .sticky-two-column-section-{{section.id}} h5,
  .sticky-two-column-section-{{section.id}} .h5,
  .sticky-two-column-section-{{section.id}} .prose h5:not(.h0, .h1, .h2, .h3, .h4, .h5, .h6) {
    font-size: var(--text-h5-n); line-height: 1.4;
  }
  .sticky-two-column-section-{{section.id}} h6,
  .sticky-two-column-section-{{section.id}} .h6,
  .sticky-two-column-section-{{section.id}} .prose h6:not(.h0, .h1, .h2, .h3, .h4, .h5, .h6) {
    font-size: var(--text-h6-n); line-height: 1.4;
  }
  /* 重置样式 end */

  .sticky-two-column-section-{{section.id}}    .sticky-two-column-wrapper {
        background: {{section.settings.bg_color}};
        padding-top: {{section.settings.padding_top}}px;
        padding-bottom: {{section.settings.padding_bottom}}px;
        position: relative;
    }

    .sticky-two-column-section-{{section.id}}    .sticky-two-column-container {
        display: flex;
        justify-content: space-between;
        {% if section.settings.section_max_width != 'none' %}
            max-width: {{ section.settings.section_max_width }}px;
            margin: 0 auto;
            padding: 0 24px;
          {% else %}
            width: 100%;
            max-width: 100%;
          {% endif %}
        position: relative;
    }

    .sticky-two-column-section-{{section.id}}    .sticky-two-column-sticky-left {
        flex: 0 0 415px;
        min-width: 300px;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        position: sticky;
        top: calc(-100px + 50vh);
        left: 0;
        height: max-content;
        box-sizing: border-box;
        z-index: 10;
        transition: top 0.18s;
    }

    .sticky-two-column-section-{{section.id}}    .sticky-two-column-sticky-left .sticky-two-column-main-title {
        color: {{ section.settings.title_color }};
        font-size: 40px;
        font-weight: 800;
        line-height: 1.22;
        margin-bottom: 20px;
    }

    .sticky-two-column-section-{{section.id}}   .sticky-two-column-sticky-left .sticky-two-column-subtitle {
        color: {{ section.settings.subtitle_color }};
        font-size: 18px;
        font-weight: 400;
        line-height: 1.38;
    }

    .sticky-two-column-section-{{section.id}}    .sticky-two-column-sticky-right {
        flex: 1 1 0%;
        box-sizing: border-box;
        max-width: 620px;
        display: flex;
        flex-direction: column;
        gap: 50px;
    }

    .sticky-two-column-section-{{section.id}}   .sticky-two-column-video-module {
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-direction: column;
        align-items: start;
    }

    .sticky-two-column-section-{{section.id}}   .sticky-two-column-video-module:last-child {
        margin-bottom: 0;
    }

    .sticky-two-column-section-{{section.id}}    .sticky-two-column-video-module video,
    .sticky-two-column-section-{{section.id}}   .sticky-two-column-video-module iframe {
        width: 100%;
        max-width: 100%;
        min-height: 200px;
        border-radius: 20px;
        margin-bottom: 20px;
    }

    .sticky-two-column-section-{{section.id}}    .sticky-two-column-video-module .sticky-two-column-title {
        color: {{ section.settings.heading_color }};
        font-size: 24px;
        font-weight: 700;
        line-height: 1.33;
        margin-bottom: 12px;
    }

    .sticky-two-column-section-{{section.id}}    .sticky-two-column-video-module .sticky-two-column-desc {
        color: {{ section.settings.content_color }};
        font-size: 18px;
        font-weight: 400;
        line-height: 1.38;
    }

    @media (max-width:900px) {
        .sticky-two-column-section-{{section.id}}    .sticky-two-column-wrapper {
            padding-top: {{section.settings.padding_top_mobile}}px;
            padding-bottom: {{section.settings.padding_bottom_mobile}}px;
        }

        .sticky-two-column-section-{{section.id}}  .sticky-two-column-container {
            flex-direction: column;
        }

        .sticky-two-column-section-{{section.id}}   .sticky-two-column-sticky-left {
            position: static;
            width: 100%;
            height: auto;
            min-width: 0;
            left: 0;
            top: 0;
            margin-bottom: 32px;
            flex: none;
        }

        .sticky-two-column-section-{{section.id}}  .sticky-two-column-sticky-left .sticky-two-column-main-title {
            font-size: 26px;
            margin-bottom: 10px;
        }

        .sticky-two-column-section-{{section.id}}   .sticky-two-column-sticky-left .sticky-two-column-subtitle {
            font-size: 14px;

        }

        .sticky-two-column-section-{{section.id}}   .sticky-two-column-sticky-right {
            max-width: 100%;
            gap: 32px;
        }

        .sticky-two-column-section-{{section.id}} .sticky-two-column-video-module video,
        .sticky-two-column-section-{{section.id}} .sticky-two-column-video-module iframe {
            min-height: 150px;
            border-radius: 10px;
            margin-bottom: 12px;
        }

        .sticky-two-column-section-{{section.id}}  .sticky-two-column-video-module .sticky-two-column-title {
            font-size: 20px;
            margin-bottom: 8px;
        }

        .sticky-two-column-section-{{section.id}}   .sticky-two-column-video-module .sticky-two-column-desc {
            font-size: 14px;
            line-height: 1.4;
        }
    }
</style>

<!-- 左侧大标题吸附，右侧素材滚动 -->
<section
  class="sticky-two-column-section-{{section.id}}"
  id="{%- if section.settings.nav_id != empty %}custom-nav-{{- section.settings.nav_id -}}{% endif -%}"
>
  <div class="sticky-two-column-wrapper">
    <div class="sticky-two-column-container">
      <div class="sticky-two-column-sticky-left" id="stickyLeft-{{section.id}}">
        {% if section.settings.title != empty %}
          <div class="sticky-two-column-main-title">{{ section.settings.title }}</div>
        {% endif %}
        {% if section.settings.subtitle != empty %}
          <div class="sticky-two-column-subtitle">
            {{ section.settings.subtitle }}
          </div>
        {% endif %}
      </div>
      <div class="sticky-two-column-sticky-right">
        {%- for block in section.blocks -%}
          {% case block.type %}
            {%- when 'video' -%}
              {%- if block.settings.video -%}
                <div class="sticky-two-column-video-module">
                  <video
                    class="lazy"
                    preload="none"
                    autoplay
                    width="100%"
                    muted
                    loop
                    playsinline
                    webkit-playsinline
                    x5-playsinline
                    x5-video-player-type="h5"
                    x-webkit-airplay="allow"
                    height="auto"
                    data-poster="{{ block.settings.video.preview_image | image_url:width:1000 }}"
                  >
                    <source
                      data-src="{{ block.settings.video.sources[0].url  }}"
                      type="video/mp4"
                      media="(min-width: 768px)"
                    >
                    <source
                      data-src="{{ block.settings.video_mobile.sources[0].url | default: block.settings.video.sources[0].url  }}"
                      type="video/mp4"
                      media="(max-width: 767px)"
                    >
                    Your browser does not support the video tag.
                  </video>
                  {% if block.settings.heading != empty %}
                    <div class="sticky-two-column-title">{{- block.settings.heading -}}</div>
                  {% endif %}
                  {% if block.settings.content != empty %}
                    <div class="sticky-two-column-desc">
                      {{- block.settings.content -}}
                    </div>
                  {% endif %}
                </div>
              {% endif %}
          {% endcase %}
        {%- endfor -%}
      </div>
    </div>
  </div>
</section>
<script type="text/javascript">
  $(document).ready(function () {
    function updateStickyLeftTop() {
      const stickyLeft = document.getElementById('#stickyLeft-{{section.id}}');
      if (!stickyLeft) return;
      const height = stickyLeft.offsetHeight;
      stickyLeft.style.top = `calc(-${height / 2}px + 50vh)`;
    }
    // 初始执行一次
    window.addEventListener('DOMContentLoaded', updateStickyLeftTop);
    // 窗口变更时重算
    window.addEventListener('resize', updateStickyLeftTop);
  });
</script>
{% schema %}
{
  "name": "sticky two column",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "nav_id",
      "label": "模块锚点ID",
      "info": "模块锚点ID，用于在页面中定位，例如：锚点定位，锚点跳转，锚点高亮等，方便用户快速定位到该模块。(锚点ID必须为英文字母,全局唯一)"
    },
    {
      "type": "select",
      "id": "section_max_width",
      "label": "模块最大宽度",
      "options": [
        {
          "value": "none",
          "label": "全屏"
        },
        {
          "value": "1448",
          "label": "1400px"
        },
        {
          "value": "1248",
          "label": "1200px"
        },
        {
          "value": "1028",
          "label": "980px"
        }
      ],
      "default": "1248"
    },

    {
      "type": "html",
      "id": "title",
      "label": "大标题",
      "default": "Advanced Printhead Protection System"
    },

    {
      "type": "html",
      "id": "subtitle",
      "label": "小标题",
      "default": "With three models to choose from, we have the perfect printer for every scale of operation. Choose the right model for your needs and start creating stunning custom designs today!"
    },

    {
      "type": "color",
      "id": "title_color",
      "label": "大标题字体颜色",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "小标题字体颜色",
      "default": "#3D3D3D"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "主标题字体颜色",
      "default": "#000000"
    },

    {
      "type": "color",
      "id": "content_color",
      "label": "正文字体颜色",
      "default": "#3D3D3D"
    },

    {
      "type": "color",
      "id": "bg_color",
      "label": "背景色",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "分区填充"
    },

    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "顶部填充",
      "default": 100
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "底部填充",
      "default": 100
    },

    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "顶部填充(移动端)",
      "default": 50
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "底部填充(移动端)",
      "default": 25
    }
  ],
  "blocks": [
    {
      "type": "video",
      "name": "视频",
      "settings": [
        {
          "type": "video",
          "id": "video",
          "label": "视频URL(PC)",
          "info": "仅限于shopify素材地址"
        },
        {
          "type": "video",
          "id": "video_mobile",
          "label": "视频URL(mobile)",
          "info": "仅限于shopify素材地址"
        },

        {
          "type": "html",
          "id": "heading",
          "label": "主标题",
          "default": "主标题"
        },
        {
          "type": "html",
          "id": "content",
          "label": "正文",
          "default": "正文"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "sticky two column",
      "blocks": []
    }
  ]
}
{% endschema %}
