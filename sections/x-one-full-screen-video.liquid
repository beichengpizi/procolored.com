<style>
  .x-one-full-screen-video-wrapper {
    position: relative;
    background-color: #000;
    aspect-ratio: 2 / 1;
  }

  .x-one-full-screen-video-title-wrapper {
    position: absolute;
    top: 100px;
    left: 50%;
    transform: translate(-50%, 0);
    max-width: 962px;
    padding: 0 24px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 1;
    width: 100%;
  }

  .x-one-full-screen-video-title-text {
    color: #fff;
    text-align: center;

    font-size: 40px;

    font-weight: 800;
    line-height: 1.2;
    /* 133% */
    margin-bottom: 24px;
  }

  .x-one-full-screen-video-subtitle-text {
    color: #fff;
    text-align: center;

    font-size: 21px;

    font-weight: 600;
    line-height: 1.22;
    {% comment %} /* 122% */
    margin-bottom: 20px; {% endcomment %}
  }

  .x-one-full-screen-video-title-desc-text {
    color: rgba(255, 255, 255, 1);
    text-align: center;

    font-size: 18px;

    font-weight: 400;
    line-height: 1.38;
    /* 138% */
    margin-bottom: 30px;
  }



  .x-one-full-screen-video-content {
    position: relative;
    width: 100%;
    overflow: hidden;
  }

  .x-one-full-screen-video-content video {
    width: 100%;
    object-fit: cover;
  }

  .x-one-full-screen-video-content video.pc {
    display: block;
  }

  .x-one-full-screen-video-content video.mb {
    display: none;
  }
  #x-one-full-screen-video-popup video.pc {
    display: block;
  }

  #x-one-full-screen-video-popup video.mb {
    display: none;
  }
  #x-one-full-screen-video-popup video {
    width: 100%;
  }

  #x-one-full-screen-video-popup {
    width: 80%;
    background-color: transparent;
  }

  #x-one-full-screen-video-popup .fancybox-button svg {
    color: #fff;
  }
  .x-one-full-screen-video-content {
    position: relative;
  }

  .custom-video-play-btn {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    cursor: pointer;
    z-index: 2;
    transition: opacity 0.3s ease;
  }

  .custom-video-play-btn.hide {
    opacity: 0;
    pointer-events: none;
  }


  @media screen and (max-width: 768px) {
    .x-one-full-screen-video-title-wrapper {
      position: absolute;
      top: 30px;
      left: 50%;
      transform: translate(-50%, 0);
      max-width: 300px;
    }

    .x-one-full-screen-video-title-text {
      font-size: 20px;
      font-weight: 700;
      line-height: 1.3;
      /* 133% */
      margin-bottom: 16px;
    }

    .x-one-full-screen-video-subtitle-text {
      font-size: 14px;
      font-weight: 400;
      line-height: 1.3;
      /* 122% */
      {% comment %} margin-bottom: 8px; {% endcomment %}
    }

    .x-one-full-screen-video-title-desc-text {
      color: rgba(255, 255, 255, 1);
      font-size: 14px;
      font-weight: 400;
      line-height: 1.4;
      /* 138% */
      margin-bottom: 20px;
    }

    .x-one-full-screen-video-button-group {
      gap: 20px;
    }

    .x-one-full-screen-video-button {
      min-height: 30px;
      font-size: 12px;
      min-width: 124px;
      border: none;
      cursor: pointer;
      box-sizing: border-box;
      line-height: 1.2;
      /* transition: box-shadow 0.2s;
          box-shadow: 0 2px 8px rgba(0,0,0,0.08); */
      /* z-index: 2;
          overflow: hidden; */
    }

    .x-one-full-screen-video-button.reserve-now {
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 124 30" fill="none"><path d="M117.497 0.504883V3.50586H120.501L120.504 6.00684V6.50586H123.5V23.5059H120.504V26.5059H117.561V29.5049L6.50879 29.5V26.5H3.50391V23.5H0.5V6.5H3.50391V5.99902L3.50098 3.5H6.50586V0.5L117.497 0.504883Z" fill="%23FF8F1C" stroke="%23FF8F1C"/></svg>')
        no-repeat center/contain;
      background-size: 100% 100%;
    }

    .x-one-full-screen-video-button.watch-video {
      display: flex;
      align-items: center;
      gap: 10px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 124 30" fill="none"><path d="M117.497 0.504883V3.50586H120.501L120.504 6.00684V6.50586H123.5V23.5059H120.504V26.5059H117.561V29.5049L6.50879 29.5V26.5H3.50391V23.5H0.5V6.5H3.50391V5.99902L3.50098 3.5H6.50586V0.5L117.497 0.504883Z" stroke="%23DDDDDD"/></svg>')
        no-repeat center/contain;
      background-size: 100% 100%;
    }

    .x-one-full-screen-video-button-icon {
      flex-shrink: 0;
      width: 14px;
      height: 14px;
    }

    .x-one-full-screen-video-content {
      position: relative;
      width: 100%;
      overflow: hidden;
      height: 530px;
    }

    .x-one-full-screen-video-content video {
      height: 100%;
      object-fit: cover;
    }

    #x-one-full-screen-video-popup {
      width: 100%;
    }

    .x-one-full-screen-video-content video.pc {
      display: none;
    }

    .x-one-full-screen-video-content video.mb {
      display: block;
    }
    #x-one-full-screen-video-popup video.pc {
      display: none;
    }

    #x-one-full-screen-video-popup video.mb {
      display: block;
    }
  }
</style>

<div
  id="{% if section.settings.nav_id != empty %}custom-nav-{{ section.settings.nav_id }}{% endif %}"
  class="x-one-full-screen-video-{{ section.id }}"
>
  <div class="x-one-full-screen-video-wrapper">
    <div class="x-one-full-screen-video-container">
      <div class="x-one-full-screen-video-content">
        <video
          class="pc"
          preload="none"
          src="https://cdn.shopify.com/videos/c/o/v/4e0166e54ad2488fabc12e9bac333d09.mp4"
          loop
          controls
          muted
          playsinline
          webkit-playsinline
          x5-playsinline
          poster="https://cdn.shopify.com/s/files/1/0601/7820/2737/files/v2.jpg?v=1771050332"
        ></video>
        <video
          class="mb"
          preload="none"
          src="https://cdn.shopify.com/videos/c/o/v/d561d4fc9ed542918b6483efade631a6.mp4"
          loop
          muted
          controls
          playsinline
          webkit-playsinline
          x5-playsinline
          poster="https://cdn.shopify.com/s/files/1/0601/7820/2737/files/02-13_X_One_02.jpg?v=1771050344"
        ></video>
        <!-- 中间播放按钮 -->
        <div class="custom-video-play-btn">
          <svg width="80" height="80" viewBox="0 0 80 80">
            <circle cx="40" cy="40" r="40" fill="rgba(0,0,0,0.6)"/>
            <polygon points="32,24 60,40 32,56" fill="#fff"/>
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const container = document.querySelector('.x-one-full-screen-video-content');
    const videos = container.querySelectorAll('video');
    const playBtn = container.querySelector('.custom-video-play-btn');

    // 获取当前显示的视频（PC 或 MB）
    function getActiveVideo() {
      return window.innerWidth <= 768 ? container.querySelector('video.mb') : container.querySelector('video.pc');
    }

    // 点击播放按钮
    playBtn.addEventListener('click', function () {
      const video = getActiveVideo();
      video.play();
      playBtn.classList.add('hide');
    });

    // 视频播放时隐藏按钮
    videos.forEach((video) => {
      video.addEventListener('play', function () {
        playBtn.classList.add('hide');
      });

      video.addEventListener('pause', function () {
        playBtn.classList.remove('hide');
      });

      video.addEventListener('ended', function () {
        playBtn.classList.remove('hide');
      });
    });
  });
</script>

{% schema %}
{
  "name": "X one full screen video",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "nav_id",
      "label": "模块锚点ID",
      "info": "模块锚点ID，用于在页面中定位，例如：锚点定位，锚点跳转，锚点高亮等，方便用户快速定位到该模块。(锚点ID必须为英文字母,全局唯一)"
    },
    {
      "type": "html",
      "id": "title",
      "label": "大标题"
    },
    {
      "type": "html",
      "id": "subtitle",
      "label": "小标题"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "顶部填充",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "顶部填充(移动端)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "底部填充",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "底部填充(移动端)",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "图片",
      "settings": [
        {
          "id": "event_tracking",
          "type": "text",
          "label": "埋点触发事件（触发时机：点击）",
          "info": "例如：Click_ShopNow_SF_oven"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "图片（PC端）"
        },
        {
          "type": "image_picker",
          "id": "mobile_image",
          "label": "图片（移动端）"
        },
        {
          "type": "html",
          "id": "heading",
          "label": "主标题"
        },
        {
          "type": "html",
          "id": "content",
          "label": "内容"
        },

        {
          "id": "link",
          "type": "url",
          "label": "Link"
        }
      ]
    },
    {
      "type": "shopifyVideo",
      "name": "视频(shopify)",
      "settings": [
        {
          "type": "image_picker",
          "id": "video_poster_pc",
          "label": "自定义视频封面(pc端)"
        },
        {
          "type": "image_picker",
          "id": "video_poster_mb",
          "label": "自定义视频封面(移动端)"
        },
        {
          "type": "video",
          "id": "video_pc",
          "label": "选择视频(pc端)"
        },
        {
          "type": "video",
          "id": "video_mb",
          "label": "选择视频(移动端)"
        },
        {
          "type": "image_picker",
          "id": "product_image",
          "label": "自定义产品图"
        },

        {
          "type": "text",
          "id": "product_name",
          "label": "自定义产品名称"
        },
        {
          "type": "product",
          "id": "product",
          "label": "选择产品"
        },
        {
          "type": "radio",
          "id": "product_variant_location",
          "label": "产品变体",
          "options": [
            {
              "value": "0",
              "label": "第一个变体"
            },
            {
              "value": "1",
              "label": "第二个变体"
            },
            {
              "value": "2",
              "label": "第三个变体"
            },
            {
              "value": "3",
              "label": "第四个变体"
            },
            {
              "value": "4",
              "label": "第五个变体"
            }
          ],
          "default": "0",
          "info": "查看对应产品后台，选择对应的变体所在位置，从上到下依次排序"
        }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "X one full screen video"
    }
  ]
}
{% endschema %}
