{% liquid
  if section.settings.top == '17.5'
    assign top = 'pt-8 md:pt-17.5'
  elsif section.settings.top == '20'
    assign top = 'pt-8 md:pt-20'
  elsif section.settings.top == '24'
    assign top = 'pt-8 md:pt-24'
  elsif section.settings.top == '28'
    assign top = 'pt-8 md:pt-28'
  else
    assign top = ''
  endif

  if section.settings.bottom == '17.5'
    assign bottom = 'pb-8 md:pb-17.5'
  elsif section.settings.bottom == '20'
    assign bottom = 'pb-8 md:pb-20'
  elsif section.settings.bottom == '24'
    assign bottom = 'pb-8 md:pb-24'
  elsif section.settings.bottom == '28'
    assign bottom = 'pb-8 md:pb-28'
  else
    assign bottom = ''
  endif
%}

<div class="max-w-6xl mx-auto px-4 md:px-20 {{ top }} {{ bottom }}" data-section-id="{{ section.id }}">
  {% if section.settings.headding != blank or section.settings.descriptiton != blank %}
    <div class="mb-4 lg:mb-10 text-center max-w-4xl mx-auto px-4 lg:px-10">
      {%- if section.settings.headding != blank -%}
        <h2 class="text-xl md:text-4xl">{{ section.settings.headding }}</h2>
      {%- endif -%}
      {% if section.settings.descriptiton != blank %}
        <p class="m-0 text-sm md:text-base">{{ section.settings.descriptiton }}</p>
      {% endif %}
    </div>
  {% endif %}

  <div class="bg-white py-5 lg:py-20 rounded-xl md:rounded-2xl shadow-md">
    {%- for block in section.blocks -%}
      <div>
        <button class="w-full text-left flex justify-between py-4 px-5 lg:px-20 lg:py-6 text-lg md:text-2xl font-bold hover:bg-gray-50 border-b border-x-0 border-t-0 border-solid border-gray-200 last:border-0">
          <span>{{ block.settings.question }}</span>
          <svg
            class="size-5 ml-4 transition-all"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M353.323071 246.407016L620.37222 510.637979l-265.320785 268.146133c-11.776208 11.775184-11.73425201 30.908964 0.091074 42.73429l0.001023 0c11.825326 11.82635 30.958082 11.867282 42.72815-2.930749L680.899758 535.559579c3.817955-4.273327 8.205892-9.321296 8.933463-12.045337 4.470825-11.112082 2.232854-24.76503301-6.710842-35.987632l-286.98213-286.98213c-11.875468-8.847505-31.096229-8.893554-42.922578 2.932796C341.393367 215.303624 341.439416 234.523361 353.323071 246.407016z" p-id="4249" fill="#000000"></path>
          </svg>
        </button>
        <div class="px-5 lg:px-20 py-4 lg:py-6 text-gray-600 text-base md:text-lg hidden">
          {{ block.settings.reply }}
        </div>
      </div>
    {%- endfor -%}
  </div>
</div>

<script>
  $(function () {
    $('[data-section-id="{{ section.id }}"] button:first svg').css({
      transform: 'rotate(90deg)',
    });
    $('[data-section-id="{{ section.id }}"] button:first').siblings('div').show();

    $('[data-section-id="{{ section.id }}"] button').click(function () {
      if ($(this).children('svg').css('transform') == 'matrix(0, 1, -1, 0, 0, 0)') {
        $(this).children('svg').css({
          transform: 'rotate(0deg)',
        });
      } else {
        $(this).children('svg').css({
          transform: 'rotate(90deg)',
        });
      }
      $(this).siblings('div').slideToggle();
    });
  });
</script>

{% schema %}
{
  "name": "FAQ",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "配置项"
    },
    {
      "type": "select",
      "id": "top",
      "default": "20",
      "label": "板块上边距",
      "options": [
        {
          "value": "none",
          "label": "无"
        },
        {
          "value": "17.5",
          "label": "小"
        },
        {
          "value": "20",
          "label": "默认"
        },
        {
          "value": "24",
          "label": "中"
        },
        {
          "value": "28",
          "label": "大"
        }
      ]
    },
    {
      "type": "select",
      "id": "bottom",
      "default": "20",
      "label": "板块下边距",
      "options": [
        {
          "value": "none",
          "label": "无"
        },
        {
          "value": "17.5",
          "label": "小"
        },
        {
          "value": "20",
          "label": "默认"
        },
        {
          "value": "24",
          "label": "中"
        },
        {
          "value": "28",
          "label": "大"
        }
      ]
    },
    {
      "type": "header",
      "content": "内容配置"
    },
    {
      "type": "text",
      "id": "headding",
      "label": "标题",
      "default": "FAQ"
    },
    {
      "type": "textarea",
      "id": "descriptiton",
      "label": "描述"
    }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "问题",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "问题"
        },
        {
          "type": "richtext",
          "id": "reply",
          "label": "回复"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ"
    }
  ]
}
{% endschema %}
