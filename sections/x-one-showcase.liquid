<style>
  .x-one-showcase-{{ section.id }}{
    background: #000;
    padding-top:{{ section.settings.padding_top }}px;
    padding-bottom:{{ section.settings.padding_bottom }}px;

  }
  .x-one-showcase-{{ section.id }} .x-one-showcase-title-wrapper{
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 25px;
    margin-bottom: 60px;

  }
  .x-one-showcase-{{ section.id }} .x-one-showcase-title-text{
    color:  #FF8F1C;
    text-align: center;
    font-size: 58px;
    font-weight: 800;
    line-height: 120%; /* 69.6px */
  }
  .x-one-showcase-{{ section.id }} .x-one-showcase-subtitle-text{
    color: #898A8E;
    text-align: center;
    font-size: 21px;
    font-weight: 400;
    line-height: 150%; /* 31.5px */
  }
  .x-one-showcase-{{ section.id }} .sec-scene {
    position: relative;
    width: 100%;
    min-height: 1056px;
    background: #000;
    overflow: hidden;
    {% comment %} border-radius: 20px; {% endcomment %}
  }

  @media screen and (min-width: 1681px) {
    .x-one-showcase-{{ section.id }} .sec-scene {
      min-height: 1300px;
    }
  }

  @media screen and (min-width: 2072px) {
    .x-one-showcase-{{ section.id }} .sec-scene {
      min-height: 1600px;
    }
  }

  /* ===== PC 布局 ===== */
  .x-one-showcase-{{ section.id }} .scene-list {
    width: 100%;
    min-height: 1056px;
    padding: 0 5.2vw;
    display: flex;
    column-gap: 12px;
  }

  .x-one-showcase-{{ section.id }} .scene-line {
    flex: 1;
    display: flex;
    flex-direction: column;
    row-gap: 12px;
  }

  .x-one-showcase-{{ section.id }} .scene-line-item {
    border-radius: 20px;

    overflow: hidden;
  }

  .x-one-showcase-{{ section.id }} .scene-cover {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  /* ===== 移动端 ===== */
  .x-one-showcase-{{ section.id }} .wrapper-ct {
    display: none;
  }
  @media screen and (max-width: 768px) {
    .x-one-showcase-{{ section.id }}{
      background: #000;
      padding-top: 40px;
      padding-bottom: 40px;

    }
    .x-one-showcase-{{ section.id }} .x-one-showcase-title-wrapper{
      display: flex;
      flex-direction: column;
      align-items: start;
      gap: 12px;
      margin-bottom: 24px;
      padding: 0 24px;

    }
    .x-one-showcase-{{ section.id }} .x-one-showcase-title-text{
      color:  #FF8F1C;
      text-align: left;
      font-size: 26px;
      font-weight: 800;
      line-height: 130%;
    }
    .x-one-showcase-{{ section.id }} .x-one-showcase-subtitle-text{
      color: #898A8E;
      text-align: left;
      font-size: 16px;
      font-weight: 600;
      line-height: 150%; /* 31.5px */
    }
    .x-one-showcase-{{ section.id }} .sec-scene {
      border-radius: 0;
      min-height: auto;
    }

    .x-one-showcase-{{ section.id }} .scene-list {
      display: none;
    }

    .x-one-showcase-{{ section.id }} .wrapper-ct {
      display: block;
    }

    .x-one-showcase-{{ section.id }} .scene-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }

    .x-one-showcase-{{ section.id }} .scene {
      margin-top: 8px;
      height: 45vw;
      background: #191c21;
      overflow: hidden;
    }

    .x-one-showcase-{{ section.id }} .scene img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .x-one-showcase-{{ section.id }} .scene:nth-child(1),
    .x-one-showcase-{{ section.id }} .scene:nth-child(2) {
      width: 48.8%;
      margin-top: 0;
    }

    .x-one-showcase-{{ section.id }} .scene:nth-child(3),
    .x-one-showcase-{{ section.id }} .scene:nth-child(6),
    .x-one-showcase-{{ section.id }} .scene:nth-child(7) {
      width: 58.9%;
    }

    .x-one-showcase-{{ section.id }} .scene:nth-child(4),
    .x-one-showcase-{{ section.id }} .scene:nth-child(5),
    .x-one-showcase-{{ section.id }} .scene:nth-child(8) {
      width: 38.9%;
    }
    .x-one-showcase-{{ section.id }} .scene:nth-child(9) {
      width: 100%;
    }
  }
</style>

<div
  id="{% if section.settings.nav_id != empty %}custom-nav-{{ section.settings.nav_id }}{% endif %}"
  class="x-one-showcase-{{ section.id }}"
>
  <div class="x-one-showcase-title-wrapper">
    <div class="x-one-showcase-title-text">{{ section.settings.title }}</div>
    <div class="x-one-showcase-subtitle-text">{{ section.settings.subtitle }}</div>
  </div>
  <div class="sec-scene">
    <!-- PC -->
    <div class="scene-list">
      {% assign images = section.blocks | where: 'type', 'image' %}
      {% for block in images %}
        {% assign index0 = forloop.index0 %}
        {% assign mod3 = index0 | modulo: 3 %}
        {% if forloop.first or mod3 == 0 %}
          <div class="scene-line">
        {% endif %}
        {% assign desktop_img = block.settings.image %}
        <div class="scene-line-item">
          <img
            data-sizes="33vw"
            data-srcset="
              {% if desktop_img.width >= 375 %}{{ desktop_img | image_url: width: 750 }} 375w,{% endif %}
              {% if desktop_img.width >= 750 %}{{ desktop_img | image_url: width: 1500 }} 750w,{% endif %}
              {% if desktop_img.width >= 1100 %}{{ desktop_img | image_url: width:2200 }} 1100w,{% endif %}
              {% if desktop_img.width >= 1500 %}{{ desktop_img | image_url: width: 3000 }} 1500w,{% endif %}
              {% if desktop_img.width >= 1780 %}{{ desktop_img | image_url: width: 3500 }} 1780w,{% endif %}
              {% if desktop_img.width >= 2000 %}{{ desktop_img | image_url: width: 4000 }} 2000w,{% endif %}
              {% if desktop_img.width >= 3000 %}{{ desktop_img | image_url: width: 3000 }} 3000w,{% endif %}
              {% if desktop_img.width >= 3840 %}{{ desktop_img | image_url: width: 3840 }} 3840w,{% endif %}

              {{ desktop_img | image_url }} {{ desktop_img.width }}w
            "
            data-src="{{ desktop_img | image_url: width: 1500 }}"
            style="max-width:100%;width:100%;aspect-ratio:{{ desktop_img.aspect_ratio }};"
            class="scene-cover lazyload"
            alt="{{ block.settings.heading | strip_html | truncate: 30 | default: 'Feature Image' }}"
          >
        </div>
        {% assign mod3_2 = index0 | modulo: 3 %}
        {% if mod3_2 == 2 or forloop.last %}
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Mobile -->
    <div class="wrapper-ct">
      <div class="scene-grid">
        {% for block in section.blocks limit: 8 %}
          {% case block.type %}
            {% when 'image' %}
              {%- assign mobile_img = block.settings.mobile_image | default: block.settings.image -%}
              <div class="scene">
                <img
                  data-sizes="100vw"
                  data-srcset="
                    {% if mobile_img.width >= 100 %}{{ mobile_img | image_url: width: 200 }} 100w,{% endif %}
                    {% if mobile_img.width >= 200 %}{{ mobile_img | image_url: width: 400 }} 200w,{% endif %}
                      {% if mobile_img.width >= 375 %}{{ mobile_img | image_url: width: 750 }} 375w,{% endif %}
                      {% if mobile_img.width >= 750 %}{{ mobile_img | image_url: width: 1500 }} 750w,{% endif %}
                      {% if mobile_img.width >= 1100 %}{{ mobile_img | image_url: width:2200 }} 1100w,{% endif %}
                      {% if mobile_img.width >= 1500 %}{{ mobile_img | image_url: width: 3000 }} 1500w,{% endif %}


                      {{ mobile_img | image_url }} {{ mobile_img.width }}w
                  "
                  data-src="{{ mobile_img | image_url: width: 500 }}"
                  style="max-width:100%;width:100%;aspect-ratio:{{ mobile_img.aspect_ratio }};"
                  class="lazyload"
                  alt="{{ block.settings.heading | strip_html | truncate: 30 | default: 'Feature Image' }}"
                >
              </div>
          {% endcase %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>
<script>
  window.addEventListener('DOMContentLoaded', function () {
    gsap.registerPlugin(ScrollTrigger);

    ScrollTrigger.matchMedia({
      /* ================= PC ================= */
      '(min-width: 769px)': function () {
        const sceneList = document.querySelector('.x-one-showcase-{{ section.id }} .scene-list');
        const lines = document.querySelectorAll('.x-one-showcase-{{ section.id }} .scene-line');

        gsap.set(sceneList, {
          scale: 1.8,
          transformPerspective: 1200,
          transformOrigin: 'center center',
          force3D: true,
        });

        gsap.set(lines[0], { y: 100 });
        gsap.set(lines[1], { y: -50 });
        gsap.set(lines[2], { y: 100 });

        gsap.to(sceneList, {
          scale: 1,
          ease: 'none',
          scrollTrigger: {
            trigger: sceneList,
            start: 'top bottom',
            end: 'top top',
            scrub: 1,
          },
        });

        lines.forEach((line, index) => {
          let fromY, toY;

          if (index === 1) {
            fromY = -50;
            toY = 50;
          } else {
            fromY = 100;
            toY = 0;
          }

          gsap.fromTo(
            line,
            { y: fromY },
            {
              y: toY,
              ease: 'none',
              scrollTrigger: {
                trigger: sceneList,
                start: 'top bottom',
                end: 'top top',
                scrub: 1,
              },
            }
          );
        });
      },

      /* ================= Mobile ================= */
      '(max-width: 768px)': function () {
        const grid = document.querySelector('.x-one-showcase-{{ section.id }} .scene-grid');

        gsap.set(grid, {
          scale: 1.1,
          opacity: 0.6,
          transformOrigin: 'center center',
        });

        gsap.to(grid, {
          scale: 1,
          opacity: 1,
          ease: 'none',
          scrollTrigger: {
            trigger: grid,
            start: 'top bottom',
            end: 'top top',
            scrub: 1,
          },
        });
      },
    });
  });
</script>
{% schema %}
{
  "name": "X one showcase",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "nav_id",
      "label": "模块锚点ID",
      "info": "模块锚点ID，用于在页面中定位，例如：锚点定位，锚点跳转，锚点高亮等，方便用户快速定位到该模块。(锚点ID必须为英文字母,全局唯一)"
    },
    {
      "type": "html",
      "id": "title",
      "label": "大标题",
      "default": "Masterpiece Showcase"
    },
    {
      "type": "html",
      "id": "subtitle",
      "label": "小标题",
      "default": "One Machine. Endless Applications."
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "顶部填充",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "底部填充",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "顶部填充(移动端)",
      "default": 40
    },

    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "底部填充(移动端)",
      "default": 40
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "图片",
      "settings": [
        {
          "id": "event_tracking",
          "type": "text",
          "label": "埋点触发事件（触发时机：点击）",
          "info": "例如：Click_ShopNow_SF_oven"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "图片（PC端）"
        },
        {
          "type": "image_picker",
          "id": "mobile_image",
          "label": "图片（移动端）"
        },
        {
          "type": "html",
          "id": "heading",
          "label": "主标题"
        },
        {
          "type": "html",
          "id": "content",
          "label": "内容"
        }
      ]
    },
    {
      "type": "shopifyVideo",
      "name": "视频(shopify)",
      "settings": [
        {
          "type": "image_picker",
          "id": "video_poster_pc",
          "label": "自定义视频封面(pc端)"
        },
        {
          "type": "image_picker",
          "id": "video_poster_mb",
          "label": "自定义视频封面(移动端)"
        },
        {
          "type": "video",
          "id": "video_pc",
          "label": "选择视频(pc端)"
        },
        {
          "type": "video",
          "id": "video_mb",
          "label": "选择视频(移动端)"
        }
      ]
    }
  ],
  "max_blocks": 9,
  "presets": [
    {
      "name": "X one showcase"
    }
  ]
}
{% endschema %}
