<style>
  #shopify-section-{{ section.id }} h5 {
    font-size: 20px;
    font-weight: 700;
    line-height: 1.33;
    min-height: 40px;
  }
  #shopify-section-{{ section.id }} h3 {
	font-size: 40px;
	line-height: 1.22;
  }
	#shopify-section-{{ section.id }} {
		background: #fff;
	}
  #shopify-section-{{ section.id }} .blog-post-info {
    background: #f9f9f9;
    padding: 20px 20px 30px;
  }
  #shopify-section-{{ section.id }} .blog-post .post-excerpt {
    color: #3d3d3d;
    font-size: 14px;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }

  #shopify-section-{{ section.id }} .view-more {
    color: #3D3D3D;
    text-align: center;
    font-size: 14px;
    font-weight: 700;
    display: block;
    width: fit-content;
  }

  #shopify-section-{{ section.id }} .view-more:hover {
    color: #FF8F1C;
    transition: all .2s ease-in-out;
  }

  #shopify-section-{{ section.id }} .blog-posts {
		min-height: unset;
    margin-bottom: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
	}
  @media (min-width: 768px) {
    #shopify-section-{{ section.id }} .row .columns {
      padding: 0 8px;
    }
    #shopify-section-{{ section.id }} .section-header {
      justify-content: center;
      padding-bottom: 50px;
    }
    #shopify-section-{{ section.id }} .section-spacing {
      padding-top: 40px;
      padding-bottom: 40px;
      margin: 0;
    }
    #shopify-section-{{ section.id }} > .row {
      max-width: 1200px;
      padding-left: 0;
      padding-right: 0;
    }

    #shopify-section-{{ section.id }} .h5 {
      min-height: 54px;
    }
  }
  @media (max-width: 768px) {
    #shopify-section-{{ section.id }} .post-excerpt p {
      font-size: 10px;
    }
    #shopify-section-{{ section.id }} h5 {
      font-size: 14px;
    }
    #shopify-section-{{ section.id }} h3 {
      font-size: 24px;
      font-weight: 700;
    }
    #shopify-section-{{ section.id }} .blog-posts.swipe-on-mobile .row {
      grid-auto-columns: minmax(calc(94% - 24px), 1fr);
      overflow-x: auto;
      grid-template-columns: repeat(auto-fill, minmax(calc(94% - 24px), 1fr));
      width: calc(100% + 24px);
      margin-left: 0;
      padding-left: 0;
      padding-right: 24px;
    }
    #shopify-section-{{ section.id }} > .row {
      overflow: hidden;
    }
    #shopify-section-{{ section.id }} .section-header {
      padding-bottom: 20px;
    }

    #shopify-section-{{ section.id }} .view-more {
      text-align: left;
    }

    #shopify-section-{{ section.id }} .blog-post {
      margin-bottom: 20px;
    }

    #shopify-section-{{ section.id }} .blog-posts {
      margin-top: 25px;
      margin-bottom: 25px;
    }

    #shopify-section-{{ section.id }} .blog-post-info {
      padding: 20px 14px;
    }
  }
</style>

{%- liquid
  assign section_heading = section.settings.heading
  assign marker_style = section.settings.marker_style
  assign section_description = section.settings.description
  assign columns_desktop = section.settings.columns_desktop
  assign mobile_swipe = section.settings.mobile_swipe
  assign section_blog = section.settings.blog
  assign post_limit = section.settings.post_limit
  assign show_view_all = section.settings.show_view_all
  assign show_date = section.settings.show_date
  assign show_excerpt = section.settings.show_excerpt
  assign show_read_more = section.settings.show_read_more
  assign image_ratio = section.settings.image_ratio

  assign marker_color = section.settings.marker_color

  assign disable_top_spacing = section.settings.disable_top_spacing
  assign disable_bottom_spacing = section.settings.disable_bottom_spacing
  assign columns_class = 'medium-6 large-4'

  case columns_desktop
    when 2
      assign columns_class = 'medium-6'
    when 3
      assign columns_class = 'medium-4'
    when 4
      assign columns_class = 'medium-6 large-3'
  endcase

  if section_blog != blank and show_view_all and post_limit < section_blog.articles_count
    assign section_heading_button_blog = section_blog
  endif
-%}
<div class="row">
  <div class="small-12 columns">
    <div class="blog-posts{% if mobile_swipe %} swipe-on-mobile{% endif %} section-spacing{% if disable_top_spacing %} section-spacing--disable-top{% endif %}{% if disable_bottom_spacing %} section-spacing--disable-bottom{% endif %}">
      {% render 'section-header',
        section_heading: section_heading,
        section_description: section_description,
        section_heading_button_blog: section_heading_button_blog,
        marker_color: marker_color,
        marker_style: marker_style
      %}
      <div class="row articles no-padding">
        {% if section_blog and blogs[section_blog].articles.size > 0 %}
          {% for article in blogs[section_blog].articles limit: post_limit %}
            <div class="small-12 {{ columns_class }} columns">
              {% render 'blog-post',
                article: article,
                show_date: show_date,
                show_excerpt: show_excerpt,
                image_ratio: image_ratio,
                show_read_more: show_read_more
              %}
            </div>
          {% endfor %}
        {% else %}
          {% assign placeholder_array = '1,2,3,4,5,6' | split: ',' %}
          {% for item in placeholder_array limit: post_limit %}
            <div class="small-12 {{ columns_class }} columns">
              {% render 'blog-post', article: false, show_date: show_date, show_excerpt: show_excerpt, image_ratio: image_ratio, show_read_more, show_read_more %}
            </div>
          {% endfor %}
        {% endif %}
      </div>

      <a href="{{ section_blog.url }}" class="view-more">
        View All Posts >>
      </a>
    </div>
  </div>
</div>
{{ 'blog.css' | asset_url | stylesheet_tag }}
{% schema %}
{
  "name": "Blog posts SMB",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Latest News",
      "info": "Wrap your text between | to add animated markers. For example: Animated |marker| will underline marker text."
    },
    {
      "type": "select",
      "id": "marker_style",
      "options": [
        {
          "value": "style1",
          "label": "Basic"
        },
        {
          "value": "style2",
          "label": "Double"
        },
        {
          "value": "style3",
          "label": "Squiggle"
        },
        {
          "value": "style4",
          "label": "Zigzag"
        }
      ],
      "default": "style1",
      "label": "Marker"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Add a short description for your brand news</p>"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Blog"
    },
    {
      "type": "range",
      "id": "post_limit",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3,
      "label": "Number of blog posts to show"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3,
      "label": "Number of columns on desktop"
    },
    {
      "type": "checkbox",
      "id": "mobile_swipe",
      "default": true,
      "label": "Enable swipe on mobile"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "Adapt to image"
        },
        {
          "value": "portrait",
          "label": "Portrait"
        },
        {
          "value": "square",
          "label": "Square"
        },
        {
          "value": "landscape",
          "label": "Landscape"
        }
      ],
      "default": "square",
      "label": "Image ratio"
    },
    {
      "type": "checkbox",
      "id": "show_date",
      "default": true,
      "label": "Show date"
    },
    {
      "type": "checkbox",
      "id": "show_excerpt",
      "default": true,
      "label": "Show excerpt"
    },
    {
      "type": "checkbox",
      "id": "show_read_more",
      "default": true,
      "label": "Show read more"
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "default": true,
      "label": "Enable \"View all\" button if blog includes more blog posts than shown"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "marker_color",
      "label": "Marker",
      "default": "#FD6262"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "checkbox",
      "id": "disable_top_spacing",
      "default": false,
      "label": "Remove top spacing"
    },
    {
      "type": "checkbox",
      "id": "disable_bottom_spacing",
      "default": false,
      "label": "Remove bottom spacing"
    }
  ],
  "presets": [
    {
      "name": "Blog posts SMB"
    }
  ]
}
{% endschema %}
