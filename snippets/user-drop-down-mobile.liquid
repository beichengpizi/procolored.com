{% comment %}
  <user-drop-down class="relative">
    <a
      class="thb-secondary-area-item thb-secondary-myaccount"
      href="{{ profile_link | escape }}"
      title="{{ 'sections.header.my_account' | t }}"
    >
      {%- render 'svg-icons' with 'myaccount' -%}
      1
    </a>
  </user-drop-down>
{% endcomment %}

<user-login class="relative block" client:idle>
  {% comment %}
    <button class="thb-secondary-area-item thb-secondary-myaccount">
      {%- render 'svg-icons' with 'myaccount' -%}
    </button>
  {% endcomment %}
  {%- if customer -%}
    <button
      data-login
      class="thb-secondary-area-item thb-secondary-myaccount"
    >
      {%- render 'svg-icons' with 'myaccount' -%}
    </button>

  {%- else -%}
    <modal-login class="thb-secondary-area-item thb-secondary-myaccount" client:idle>
      <a
        href="/account/login"
        data-login
      >
        {%- render 'svg-icons' with 'myaccount' -%}
      </a>
    </modal-login>
  {%- endif -%}
  <div
    class="absolute z-10 hidden"
    data-dropdown-content
    data-popper-placement="bottom-end"
    style="position: absolute; inset: 0px 0px auto auto; margin: 0px;  transform: translate(0px, 66px); "
  >
    <div class="bg-white divide-y divide-solid divide-gray-100 rounded-lg shadow w-auto">
      {%- if customer -%}
        <div class="px-16 py-3 text-gray-900">
          <h3 class="text-lg font-semibold m-0">
            <a href="/account">My Account</a>
          </h3>
        </div>
        <ul class="py-2 text-base text-gray-700 list-none m-0 !border-x-0 !border-b-0">
          <li>
            <a href="/account?view=order-all" class="flex items-center gap-x-2 px-4 py-2 hover:bg-gray-100">
              <svg
                class="w-4 h-4"
                viewBox="0 0 48 48"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
              >
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <path d="M31,4 C32.6568542,4 34,5.34314575 34,7 L37,7 C38.6568542,7 40,8.34314575 40,10 L40,40 C40,41.6568542 38.6568542,43 37,43 L11,43 C9.34314575,43 8,41.6568542 8,40 L8,10 C8,8.34314575 9.34314575,7 11,7 L14,7 C14,5.34314575 15.3431458,4 17,4 L31,4 Z M14.1710242,10.0009007 L11,10 L11,40 L37,40 L37,10 L33.8289758,10.0009007 C33.4168852,11.1656226 32.3058822,12 31,12 L17,12 C15.6941178,12 14.5831148,11.1656226 14.1710242,10.0009007 Z M22.9931965,31 C23.8216236,31 24.4931965,31.6715729 24.4931965,32.5 C24.4931965,33.3284271 23.8216236,34 22.9931965,34 L16.9931965,34 C16.1647693,34 15.4931965,33.3284271 15.4931965,32.5 C15.4931965,31.6715729 16.1647693,31 16.9931965,31 L22.9931965,31 Z M30.9931965,24 C31.8216236,24 32.4931965,24.6715729 32.4931965,25.5 C32.4931965,26.3284271 31.8216236,27 30.9931965,27 L16.9931965,27 C16.1647693,27 15.4931965,26.3284271 15.4931965,25.5 C15.4931965,24.6715729 16.1647693,24 16.9931965,24 L30.9931965,24 Z M30.9931965,17 C31.8216236,17 32.4931965,17.6715729 32.4931965,18.5 C32.4931965,19.3284271 31.8216236,20 30.9931965,20 L16.9931965,20 C16.1647693,20 15.4931965,19.3284271 15.4931965,18.5 C15.4931965,17.6715729 16.1647693,17 16.9931965,17 L30.9931965,17 Z M31,7 L17,7 L17,9 L31,9 L31,7 Z" fill="currentColor" fill-rule="nonzero"></path>
                </g>
              </svg>

              My order
            </a>
          </li>
          <li>
            <a href="/account?view=rewards" class="flex items-center gap-x-2 px-4 py-2 hover:bg-gray-100">
              {% comment %} {% render 'member-icons', icon: 'jb', class: 'w-3 h-3' %} {% endcomment %}
              <svg
                class="w-4 h-4"
                viewBox="0 0 48 48"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
              >
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g transform="translate(8.546634, 5.384615)" fill="currentColor" fill-rule="nonzero">
                        <path d="M15.6153846,1.77635684e-15 C24.125056,1.77635684e-15 31.2307692,3.55285662 31.2307692,8.61538462 L31.2307692,8.61538462 L31.2307692,18.2750548 C31.2307692,18.3893785 31.2273706,18.5029844 31.220633,18.6158493 L31.2307692,18.6153846 L31.2307692,28.2750548 C31.2307692,33.5035945 24.122036,37.2307692 15.6153846,37.2307692 C7.23383106,37.2307692 0.209382707,33.6124112 0.00459390509,28.5047445 L0,28.2750548 L0,18.6153846 L0.010136196,18.6158493 C0.00793009087,18.5788935 0.00608196198,18.5418583 0.00459390509,18.5047445 L0,18.2750548 L0,8.61538462 L0.00459197457,8.39302375 C0.20929519,3.44912919 7.23085547,1.77635684e-15 15.6153846,1.77635684e-15 Z M15.6153846,27.2307692 C10.618932,27.2307692 6.10474691,25.9449319 3.23002692,23.8242789 L3.23076923,28.2750548 C3.23076923,31.1544195 8.658063,34 15.6153846,34 C22.4527524,34 27.8123971,31.2516971 27.9951799,28.4239429 L28,28.2750548 L28.0008011,23.8242356 C25.1260839,25.9449144 20.6118713,27.2307692 15.6153846,27.2307692 Z M28.0007214,13.9683443 C25.1265157,16.0053334 20.6130737,17.2307692 15.6153846,17.2307692 C10.6177322,17.2307692 6.10431985,16.0053514 3.23011117,13.9683891 L3.23076923,18.2750548 C3.23076923,21.1544195 8.658063,24 15.6153846,24 C22.4527524,24 27.8123971,21.2516971 27.9951799,18.4239429 L28,18.2750548 Z M15.6153846,3.23076923 C8.66108299,3.23076923 3.23076923,5.94592611 3.23076923,8.61538462 C3.23076923,11.2848431 8.66108299,14 15.6153846,14 C22.5696862,14 28,11.2848431 28,8.61538462 C28,5.94592611 22.5696862,3.23076923 15.6153846,3.23076923 Z"></path>
                    </g>
                </g>
              </svg>
              My Rewards
            </a>
          </li>
        </ul>
        <div class="py-2 !border-x-0 !border-b-0">
          <a
            href="/account/logout"
            class="flex items-center gap-x-2 px-4 py-2 text-base hover:bg-gray-100"
          >
            <svg
              class="w-4 h-4"
              viewBox="0 0 48 48"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <path d="M23,7.5 C23.8284271,7.5 24.5,8.17157288 24.5,9 C24.5,9.77969612 23.9051119,10.4204487 23.14446,10.4931334 L23,10.5 L10.5,10.5 L10.5,37.5 L23,37.5 C23.7796961,37.5 24.4204487,38.0948881 24.4931334,38.85554 L24.5,39 C24.5,39.7796961 23.9051119,40.4204487 23.14446,40.4931334 L23,40.5 L10,40.5 C8.6745166,40.5 7.58996133,39.4684641 7.50531768,38.1643757 L7.5,38 L7.5,10 C7.5,8.6745166 8.53153594,7.58996133 9.83562431,7.50531768 L10,7.5 L23,7.5 Z M32.3542217,14.938671 C32.9037428,14.3898427 33.7728267,14.3560675 34.3616842,14.836967 L34.4755416,14.9400091 L41.768881,22.2425557 L41.8906068,22.3733175 C42.7020714,23.3091834 42.7030332,24.7041685 41.8940702,25.6410989 L41.7666514,25.7780884 L34.4742026,33.06133 L34.3602151,33.1642282 C33.8100486,33.6123735 33.0163399,33.6118722 32.46674,33.1630322 L32.3528826,33.05999 L32.2499843,32.9460025 C31.801839,32.395836 31.8023404,31.6021273 32.2511804,31.0525274 L32.3542226,30.93867 L37.783,25.516 L18.9987409,25.5 C18.1703141,25.4993041 17.4993051,24.8271677 17.4999989,23.9987409 C17.500655,23.2190451 18.0960807,22.5787921 18.8567934,22.5067458 L19.0012591,22.5 L37.803,22.516 L32.3528836,17.0599909 L32.2499852,16.9460035 C31.769829,16.3565398 31.8047006,15.4874992 32.3542217,14.938671 Z" fill="currentColor" fill-rule="nonzero"></path>
              </g>
            </svg>
            Log out
          </a>
        </div>
      {%- else -%}
        {% comment %}
          <div class="px-4 py-3 text-gray-900">
            <h3 class="text-lg font-semibold m-0">Unlock Membership Benefits</h3>
          </div>
          <div class="!border-x-0 !border-b-0">
            <ul class="p-4 ml-4 list-disc m-0 text-sm text-gray-600">
              <li>Poins rewards</li>
              <li>10% off consumables</li>
              <li>Free Training Class</li>
              <li>Free Trials</li>
            </ul>
          </div>

          <modal-login class="flex justify-between gap-x-4 p-4 !border-x-0 !border-b-0" client:idle>
            <a
              class="bg-accent text-white font-semibold hover:bg-accent-hover hover:text-white border border-solid border-transparent text-center text-sm px-4 py-2 rounded-3xl w-full focus:outline-none focus:shadow-outline"
              href="/account/register"
              data-join
            >
              Join Now
            </a>
            <a
              class="bg-white text-accent font-semibold hover:bg-yellow-50 border border-solid border-accent text-center text-sm px-4 py-2 rounded-3xl w-full focus:outline-none focus:shadow-outline"
              href="/account/login"
              data-login
            >
              LogIn
            </a>
          </modal-login>
        {% endcomment %}
      {%- endif -%}
    </div>
  </div>
</user-login>
{% comment %}
  <script>
    // 添加一个全局方法来获取和控制下拉菜单
    window.toggleUserDropDown = (buttonEl) => {
      // 获取最近的 user-drop-down 元素
      const dropDown = buttonEl.closest('user-drop-down') || document.querySelector('user-drop-down');
      console.log('dropDown===>', dropDown);
      if (dropDown) {
        const isExpanded = buttonEl.getAttribute('aria-expanded') === 'true';
        console.log('isExpanded===>', isExpanded);
        if (isExpanded) {
          dropDown.hideSubMenu(buttonEl);
          buttonEl.setAttribute('aria-expanded', 'false');
        } else {
          dropDown.showSubMenu(buttonEl);
          buttonEl.setAttribute('aria-expanded', 'true');
        }
      }
    };
  </script>
{% endcomment %}
